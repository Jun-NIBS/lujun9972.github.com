<!DOCTYPE html>
<html lang="en">
<head>
  <title>利用linux清空Windows登陆密码 - 暗无天日</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
  <meta name="author" content="lujun9972" />
  <meta name="keywords" content="linux和它的小伙伴" />
  <style>
   #ds-thread #ds-reset .ds-comment-body p {color: #ffffff;}
   #ds-thread #ds-reset .ds-comment-body p a {color: #ff0;}
   #ds-thread #ds-reset .ds-comment-body p a:hover {color: #0ff;}
   #disqus_thread a {color: #00ffff;}
  </style>
  <link rel="stylesheet" href="https://lujun9972.github.io/media/css/main.css" type="text/css"/>
  <link rel="stylesheet" href="https://lujun9972.github.io/media/css/comment.css" type="text/css"/>
</head>

  <body><div class="container">
    <div>
      <header class="masthead">
        <h1 class="masthead-title"><a href="https://lujun9972.github.io/">暗无天日</a> <span class="subtitle">=============&gt;随便,谢谢</span></h1>
        <ul>
          <li><a href="https://lujun9972.github.io/years/">Years</a></li>
          <li><a href="https://lujun9972.github.io/authors/">Authors</a></li>
          <li><a href="https://lujun9972.github.io/tags/">Tags</a></li>
          <li><a href="https://lujun9972.github.io/about/">About</a></li>
          <li><a href="https://github.com/lujun9972/lujun9972.github.com">Github</a></li>
          <li><a href="https://lujun9972.github.io/rss.xml">RSS</a></li>
        </ul>
        <form method="get" id="searchform" action="http://www.google.com/search">
          <input type="text" class="field" name="q" id="s" placeholder="Search">
          <input type="hidden" name="as_sitesearch" value="lujun9972.github.io">
        </form>
      </header>
    </div>

<div>
<div class="post">
<h1 class="title">利用linux清空Windows登陆密码</h1>
<p>
Windows的用户和密码存放在SAM文件中，通过 <code>chntpw</code> 可以实现清空登陆密码的目的。
</p>

<p>
步骤如下：
</p>

<ol class="org-ol">
<li><p>
用Linux Live CD或Live USB登陆PC
</p>

<p>
我这里用了ArchLinux的安装镜像来演示。
</p>


<div class="figure">
<p><img src="https://lujun9972.github.io/assets/blog/2018/03/28/利用linux清空windows登陆密码/linux_reset_windows_password01.png" alt="linux_reset_windows_password01.png" />
</p>
</div>

<p>
按下回车进入命令行
</p>


<div class="figure">
<p><img src="https://lujun9972.github.io/assets/blog/2018/03/28/利用linux清空windows登陆密码/linux_reset_windows_password02.png" alt="linux_reset_windows_password02.png" />
</p>
</div></li>
<li><p>
安装 <code>chntpw</code>
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#21551;&#21160;dhcpcd&#33719;&#21462;IP&#22320;&#22336;</span>
dhcpcd

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#23433;&#35013;chntpw</span>
pacman -Syy
pacman -S chntpw --noconfirm
</pre>
</div>


<div class="figure">
<p><img src="https://lujun9972.github.io/assets/blog/2018/03/28/利用linux清空windows登陆密码/linux_reset_windows_password03.png" alt="linux_reset_windows_password03.png" />
</p>
</div></li>
<li><p>
挂载windows所在分区
</p>
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#26597;&#30475;windows&#20998;&#21306;</span>
sfdisk -l
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#25346;&#36733;windows&#25152;&#22312;&#20998;&#21306;</span>
mount /dev/sda1 /mnt
</pre>
</div>


<div class="figure">
<p><img src="https://lujun9972.github.io/assets/blog/2018/03/28/利用linux清空windows登陆密码/linux_reset_windows_password04.png" alt="linux_reset_windows_password04.png" />
</p>
</div></li>
<li><p>
开始破解
</p>

<p>
进入SAM文件所在目录，SAM文件在 <code>WINDOWS/system32/config/</code> 目录下
</p>
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #4f97d7;">cd</span> /mnt/WINDOWS/system32/config
</pre>
</div>

<p>
使用 <code>chntpw -l SAM</code> 可以查看用户记录
</p>


<div class="figure">
<p><img src="https://lujun9972.github.io/assets/blog/2018/03/28/利用linux清空windows登陆密码/linux_reset_windows_password05.png" alt="linux_reset_windows_password05.png" />
</p>
</div>

<p>
要清空登陆密码，则可以运行命令
</p>
<div class="org-src-container">
<pre class="src src-shell">chntpw -i SAM
</pre>
</div>
<p>
会出现一个菜单：
</p>


<div class="figure">
<p><img src="https://lujun9972.github.io/assets/blog/2018/03/28/利用linux清空windows登陆密码/linux_reset_windows_password06.png" alt="linux_reset_windows_password06.png" />
</p>
</div>

<p>
我们选择 <code>1- Edit user data and passwords</code> 
</p>


<div class="figure">
<p><img src="https://lujun9972.github.io/assets/blog/2018/03/28/利用linux清空windows登陆密码/linux_reset_windows_password07.png" alt="linux_reset_windows_password07.png" />
</p>
</div>

<p>
然后输入要清空密码用户前面的RID，比如我这里想清空 <code>Administrator</code> 的密码，则输入 <code>01f4</code>
然后你可以看到一个菜单，通过这个菜单你可以对用户做许多操作
</p>


<div class="figure">
<p><img src="https://lujun9972.github.io/assets/blog/2018/03/28/利用linux清空windows登陆密码/linux_reset_windows_password08.png" alt="linux_reset_windows_password08.png" />
</p>
</div>

<p>
这里我们选择 <code>1 - Cleara (blank) user password</code>
</p>


<div class="figure">
<p><img src="https://lujun9972.github.io/assets/blog/2018/03/28/利用linux清空windows登陆密码/linux_reset_windows_password09.png" alt="linux_reset_windows_password09.png" />
</p>
</div>

<p>
OK, <code>Administrator</code> 的密码就被清空了，我们按 <code>q</code> 健退出 <code>chntpw</code> 程序
最后按下 <code>y</code> 保存对文件的修改:
</p>


<div class="figure">
<p><img src="https://lujun9972.github.io/assets/blog/2018/03/28/利用linux清空windows登陆密码/linux_reset_windows_password10.png" alt="linux_reset_windows_password10.png" />
</p>
</div>

<p>
最后重启系统后，再进入windows就会发现密码已经被清空了。
</p></li>
<li><p>
获取 chntpw 的帮助信息
通过执行 <code>chntpw -h</code> 就能查看它的其他选项说明：
</p>
<div class="org-src-container">
<pre class="src src-shell">chntpw -h
</pre>
</div>

<p>
结果为:
</p>
<div class="org-src-container">
<pre class="src src-org">chntpw: change password of a user in a Windows SAM file,
or invoke registry editor. Should handle both 32 and 64 bit windows and
all version from NT3.x to Win8.1
chntpw [OPTIONS] &lt;samfile&gt; [systemfile] [securityfile] [otherreghive] [...]
 -h          This message
 -u &lt;user&gt;   Username or RID (0x3e9 for example) to interactively edit
 -l          list all users in SAM file and exit
 -i          Interactive Menu system
 -e          Registry editor. Now with full write support!
 -d          Enter buffer debugger instead (hex editor), 
 -v          Be a little more verbose (for debuging)
 -L          For scripts, write names of changed files to /tmp/changed
 -N          No allocation mode. Only same length overwrites possible (very safe mode)
 -E          No expand mode, do not expand hive file (safe mode)

Usernames can be given as name or RID (in hex with 0x first)

See readme file on how to get to the registry files, and what they are.
Source/binary freely distributable under GPL v2 license. See README for details.
NOTE: This program is somewhat hackish! You are on your own!
</pre>
</div></li>
</ol>

</div>
</div>
<div>
        <div class="post-meta">
            <span title="post date" class="post-info">2018-03-28</span>
            <span title="last modification date" class="post-info">2018-03-28</span>
            <span title="tags" class="post-info">:<a href="https://lujun9972.github.io/tags/linux和它的小伙伴">linux和它的小伙伴</a>:</span>
            <span title="author" class="post-info"><a href="mailto:lujun9972 &lt;at&gt; T520">lujun9972</a></span>
        </div>
    <script src="https://lujun9972.github.io/media/js/jquery-2.1.3.min.js"></script>
        <section>
            <h1>Comments</h1>
            <div id="comment-wrap">
                    <a class="disqus_label">使用 Disqus 评论</a>
    </ul>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
         //var disqus_developer = 1;
         var preempt_signal=false;
         var disqus_identifier = "/blog/2018/03/28/利用linux清空windows登陆密码/";
         var disqus_url = "https://lujun9972.github.io/blog/2018/03/28/利用linux清空windows登陆密码/";
         var disqus_shortname = 'lujun9972';
         /* * * DON'T EDIT BELOW THIS LINE * * */
         (function() {
             var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
             dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
             (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
             $('#disqus_thread').css('display','none');
         })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    <script>
     /* comments */
     var ego_disqus_thread=$('#disqus_thread');
     var ego_ds_label=$('.ds-thread');
     $('.disqus_label').click(function(){
         ego_disqus_thread.show();
         ego_ds_label.hide();
     });
     $('.ds-label').click(function(){
         ego_disqus_thread.hide();
         ego_ds_label.show();
     });
    </script>
        </section>
    <script src="https://lujun9972.github.io/media/js/main.js"></script>
    <div class="footer">
        <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 25.x(<a href="http://orgmode.org">Org mode</a> 9.x)</p>
        <p>
            Copyright &copy; 2014 - <span id="footerYear"></span> <a href="mailto:lujun9972 &lt;at&gt; T520">lujun9972</a>
            &nbsp;&nbsp;-&nbsp;&nbsp;
            Powered by <a href="https://github.com/emacs-china/ego" target="_blank">EGO</a><br/>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" style="border-width:0" alt="Creative Commons License" class="center"></a>
            <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
        </p>
    </div>
            </div>
            <script type="text/javascript"
                    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG">
            </script>
            <script type="text/x-mathjax-config">
             MathJax.Hub.Config({ TeX: { equationNumbers: {autoNumber: "AMS"} } });
            </script>
</div>

  </div></body>
</html>
